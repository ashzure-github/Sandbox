<!DOCTYPE html>
<html>

<head>

    <link rel="stylesheet" href="/stylesheets/default.css">
    <meta charset="UTF-8">
    <html lang="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        #puppyButton {
            margin-bottom: 10px;
            color: hotpink;
            border-style: solid;
            border-color: hotpink;
            border-width: 2px;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }

        }

        #puppyDiv {
            text-align: center;
        }
    </style>

</head>

<body>

    <div id="puppyDiv">
        <button id="puppyButton">summon puppy</button>
    </div>

    <script>

        const puppyButton = document.getElementById("puppyButton");
        let imageAdded = 0;
        let stopButtonPresent = false;
        var imgContainer = document.createElement("div");

        puppyButton.addEventListener("click", addImage);
        imgContainer.style.textAlign = "center";
        document.body.appendChild(imgContainer);

        function addImage() {
            switch (imageAdded) {
                case 0:
                    getPuppy0();
                    break;
                case 1:
                    getPuppy1();
                    break;
                case 2:
                    spinPuppy();
            }

        }

        function getPuppy0() {
            var img = document.createElement("img");
                    img.src = "/images/puppy.jpg";
                    img.style.width = "100px";
                    img.style.display = "inline-block";
                    img.style.height = "100px";
                    img.style.borderRadius = "50%";
                    imgContainer.appendChild(img);
                    document.getElementById("puppyButton").innerText = "Add a friend!";
                    imageAdded++;
        };

        function getPuppy1() {
            var img = document.createElement("img");
                    img.src = "/images/puppy.jpg";
                    img.style.width = "100px";
                    img.style.height = "100px";
                    img.style.borderRadius = "50%";
                    img.style.display = "inline-block";
                    imgContainer.appendChild(img);
                    document.getElementById("puppyButton").innerText = "Stop here.";
                    imageAdded++;
        }
        
        function spinPuppy() {
            
            var imgs = Array.from(document.getElementsByTagName("img"))
                    const spin = img => {
                        img.style.animationDuration = "500ms";
                        img.style.animationName = "spin";
                        img.style.animationIterationCount = "infinite";
                        img.style.animationPlayState = "running";
                        img.style.animationTimingFunction = "linear";
                    }
                    imgs.forEach(spin);
                    document.getElementById("puppyButton").innerText = "Hubris.";

                    if (stopButtonPresent === false) {
                        getStopButton();

                    } else { }
        }

        function getStopButton() {
            var imgs = Array.from(document.getElementsByTagName("img"))
            var stopButton = document.createElement("button");
                        stopButton.style.display = "block";
                        stopButton.style.backgroundColor = "white";
                        stopButton.style.margin = "auto";
                        stopButton.style.borderColor = "gray";
                        stopButton.style.borderWidth = "2px";
                        stopButton.style.borderStyle = "solid";
                        stopButton.style.marginTop = "20px";
                        stopButton.textContent = ">I'm sorry!";
                        stopButton.addEventListener("mouseover", function () {
                            stopButton.style.backgroundColor = "lightGray";
                        });
                        stopButton.addEventListener("mouseout", function () {
                            stopButton.style.backgroundColor = "white";
                        });
                        stopButton.addEventListener("click", function () {
                            imgs.forEach(function (img) {
                                img.style.animationPlayState = "paused";
                            });
                        });
                        document.body.appendChild(stopButton);
                        stopButtonPresent = true;
        }
    
    </script>

</body>

</html>